
<!DOCTYPE html>
<html>
<head>
  <title>Snap to Road - Google Maps API v3</title>
  <style type="text/css">
    html, body {margin: 0; width:100%; height: 100%; }
    #map_canvas { position:absolute; top:50px;bottom:0;left:0;right:0;}
  </style>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript">
    var map, path = new google.maps.MVCArray(), service = new google.maps.DirectionsService(), shiftPressed = false, poly;
    function Init() {
      var myOptions = {
	  
	      center: new google.maps.LatLng(54.0924200,18.7778700),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
		  disableDefaultUI: true
      }
var paths = [];
paths.push(new google.maps.LatLng(54.07232,18.76756320000004));
paths.push(new google.maps.LatLng(54.073,18.7675632000000));
//paths.push(new google.maps.LatLng(54.075,18.76756320000004));
//paths.push(new google.maps.LatLng(54.077,18.76756320000004));

      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
	  poly = new google.maps.Polyline({ map: map });
		for(var j = 0; j < 4; j++){
			if (path.getLength() === 0) {
			
			path.push(paths[j]);
			if(path.getLength() === 1) {
				poly.setPath(path);
			}
        } else {
          service.route({ origin: path.getAt(path.getLength() - 1), destination: paths[j], travelMode: google.maps.DirectionsTravelMode.DRIVING }, function(result, status) {
            if (status == google.maps.DirectionsStatus.OK) {
              for(var i = 0, len = result.routes[0].overview_path.length; i < len; i++) {
			    path.push(result.routes[0].overview_path[i]);
			  }
            }
          });
        }
      }
    }
  </script>
</head>
<body onload="Init()">
  <p style="margin:0;padding:10px;">Draw the route on the map. Hold shift to prevent a line segment from snapping to roads.</p>
  <div id="map_canvas"></div>
</body>
</html>